<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#2f6bff" />
  <title>Life Shield</title>
  <link rel="manifest" href="manifest.json" />
  <link rel="stylesheet" href="styles/reset.css" />
  <link rel="stylesheet" href="styles/main.css" />
</head>
<body data-theme="light">
  <div class="app">
    <header class="app__header">
      <div>
        <p class="app__eyebrow">Life Shield</p>
        <h1 class="app__title">Личный щит устойчивости</h1>
        <p class="app__toast" data-copy="resultsToasts"></p>
      </div>
    </header>

    <main class="app__content">
      <section class="screen is-active" data-screen="shield">
        <h2>Щит</h2>
        <div class="shield">
          <div class="shield__summary">
            <div class="shield__total-card">
              <p class="shield__label">Общий индекс</p>
              <p class="shield__total">
                <span data-shield-total>0</span>
                <span class="shield__total-max">/100</span>
              </p>
              <p class="shield__hint">Суммарный показатель по шести сферам.</p>
            </div>
            <button class="shield__snapshot-button" type="button" data-open-snapshot>
              Сделать снимок (2 минуты)
            </button>
          </div>
          <div class="shield__grid" data-shield-grid></div>
        </div>
      </section>
      <section class="screen screen--overlay" data-screen="snapshot">
        <div class="snapshot">
          <header class="snapshot__header">
            <button class="snapshot__back" type="button" data-close-snapshot>← Назад</button>
            <div>
              <p class="snapshot__eyebrow">Снимок (2 минуты)</p>
              <h2 class="snapshot__title">Проверим базовые опоры</h2>
              <p class="snapshot__subtitle">Заполни поля, чтобы пересчитать щит и получить 3 шага на неделю.</p>
            </div>
          </header>
          <form class="snapshot__form" data-snapshot-form>
            <div class="snapshot__section">
              <h3 class="snapshot__section-title">Финансы</h3>
              <div class="snapshot__grid">
                <label class="snapshot__field">
                  <span class="snapshot__label">Резерв (₽)</span>
                  <input type="number" name="reserve" min="0" step="100" inputmode="numeric" required />
                </label>
                <label class="snapshot__field">
                  <span class="snapshot__label">Обязательные расходы/мес (₽)</span>
                  <input type="number" name="expenses" min="0" step="100" inputmode="numeric" required />
                </label>
                <label class="snapshot__field">
                  <span class="snapshot__label">Доход/мес (₽)</span>
                  <input type="number" name="income" min="0" step="100" inputmode="numeric" required />
                </label>
                <div class="snapshot__field">
                  <span class="snapshot__label">Кол-во источников дохода</span>
                  <div class="snapshot__options">
                    <label class="snapshot__option">
                      <input type="radio" name="incomeSources" value="1" checked />
                      <span>1</span>
                    </label>
                    <label class="snapshot__option">
                      <input type="radio" name="incomeSources" value="2" />
                      <span>2</span>
                    </label>
                    <label class="snapshot__option">
                      <input type="radio" name="incomeSources" value="3" />
                      <span>3+</span>
                    </label>
                  </div>
                </div>
                <label class="snapshot__field snapshot__toggle">
                  <input type="checkbox" name="hasCredits" data-credit-toggle />
                  <span>Кредиты/платежи есть</span>
                </label>
                <label class="snapshot__field" data-credit-payment hidden>
                  <span class="snapshot__label">Платёж/мес (₽)</span>
                  <input type="number" name="creditPayment" min="0" step="100" inputmode="numeric" />
                </label>
              </div>
            </div>

            <div class="snapshot__section">
              <h3 class="snapshot__section-title">Состояние</h3>
              <div class="snapshot__sliders">
                <label class="snapshot__slider">
                  <span class="snapshot__label">Энергия: сколько сил на неделю</span>
                  <input type="range" name="energy" min="0" max="10" step="1" value="6" />
                  <span class="snapshot__value" data-range-value>6</span>
                </label>
                <label class="snapshot__slider">
                  <span class="snapshot__label">Опора: на кого можно опереться</span>
                  <input type="range" name="support" min="0" max="10" step="1" value="6" />
                  <span class="snapshot__value" data-range-value>6</span>
                </label>
                <label class="snapshot__slider">
                  <span class="snapshot__label">Гибкость: как быстро адаптируюсь</span>
                  <input type="range" name="flexibility" min="0" max="10" step="1" value="6" />
                  <span class="snapshot__value" data-range-value>6</span>
                </label>
              </div>
            </div>

            <button class="snapshot__submit" type="submit">Сохранить снимок</button>
          </form>

          <div class="snapshot__results" data-snapshot-results hidden>
            <div class="snapshot__result-card">
              <p class="snapshot__saved">Сохранено: <span data-snapshot-date></span></p>
              <h3 class="snapshot__section-title">3 шага на неделю</h3>
              <ul class="snapshot__steps" data-snapshot-steps></ul>
              <button class="snapshot__stress" type="button" data-open-stress>
                Прогнать стресс-тест
              </button>
            </div>
          </div>
        </div>
      </section>
      <section class="screen" data-screen="missions">
        <h2>Миссии</h2>
        <p class="screen__placeholder" data-copy="missionsToasts"></p>
        <div class="missions-day" data-missions>
          <div class="missions-day__card">
            <div class="missions-day__header">
              <div>
                <p class="missions-day__kicker">Миссия дня</p>
                <h3 class="missions-day__title" data-mission-title></h3>
                <p class="missions-day__detail" data-mission-detail></p>
              </div>
              <div class="missions-day__stats">
                <div class="missions-day__stat">
                  <span class="missions-day__stat-label">XP</span>
                  <strong data-mission-xp></strong>
                </div>
                <div class="missions-day__stat">
                  <span class="missions-day__stat-label">Streak</span>
                  <strong data-mission-streak></strong>
                </div>
              </div>
            </div>
            <div class="missions-day__meta">
              <span class="missions-day__tag" data-mission-tile></span>
              <span class="missions-day__tag" data-mission-bonus></span>
            </div>
            <p class="missions-day__line" data-mission-line></p>
            <div class="missions-day__footer">
              <span class="missions-day__status" data-mission-status></span>
              <span class="missions-day__rerolls" data-mission-rerolls></span>
            </div>
            <div class="missions-day__actions">
              <button class="missions-day__button" type="button" data-mission-complete>Выполнить</button>
              <button class="missions-day__button missions-day__button--ghost" type="button" data-mission-reroll>
                Другая миссия
              </button>
            </div>
          </div>
        </div>
      </section>
      <section class="screen" data-screen="stress">
        <div class="stress">
          <header class="stress__header">
            <div class="stress__header-main">
              <h2>Стресс-тест</h2>
              <p class="stress__intro" data-copy="stressTestJabs"></p>
              <div class="stress__tokens">
                <span>Жетоны</span>
                <strong data-stress-tokens>0</strong>
              </div>
            </div>
            <button class="stress__snapshot-button" type="button" data-open-stress-snapshot>
              Обновить данные
            </button>
          </header>
          <div class="stress__baseline" data-stress-baseline></div>
          <div class="stress__actions">
            <button class="stress__run-all" type="button" data-stress-run-all>
              Прогнать все сценарии
            </button>
          </div>
          <div class="stress__scenarios" data-stress-scenarios></div>
          <details class="stress__history" data-stress-history>
            <summary>История прогонов</summary>
            <div class="stress__history-list" data-stress-history-list></div>
          </details>
        </div>
      </section>
      <section class="screen" data-screen="history">
        <h2>История</h2>
        <div class="history">
          <div class="history__empty" data-history-empty hidden>
            <h3>Пока нет истории</h3>
            <p class="history__empty-copy" data-copy="historyEmpty"></p>
          </div>
          <div class="history__content" data-history-content>
            <article class="history__card">
              <div class="history__card-header">
                <div>
                  <h3>Динамика индекса щита</h3>
                  <p>Последние снимки с общим индексом 0–100.</p>
                </div>
              </div>
              <div class="history__chart" data-history-chart></div>
            </article>
            <article class="history__card">
              <div class="history__card-header">
                <div>
                  <h3>Последние снимки</h3>
                  <p>Дата и самые заметные изменения.</p>
                </div>
              </div>
              <div class="history__list" data-history-snapshots></div>
            </article>
            <article class="history__card">
              <div class="history__card-header">
                <div>
                  <h3>Последние стресс-тесты</h3>
                  <p>Сценарий и runway по последним прогонам.</p>
                </div>
              </div>
              <div class="history__list" data-history-stress></div>
            </article>
          </div>
        </div>
      </section>
      <section class="screen" data-screen="settings">
        <h2>Настройки</h2>
        <div class="settings-card">
          <p class="settings-card__title">Тема</p>
          <p class="settings-card__hint">Выбирай тему интерфейса, чтобы глазам было комфортно.</p>
          <div class="theme-toggle__group" role="radiogroup" aria-label="Тема интерфейса">
            <button class="theme-toggle__button" type="button" data-theme-option="light" aria-pressed="false">
              Светлая
            </button>
            <button class="theme-toggle__button" type="button" data-theme-option="dark" aria-pressed="false">
              Тёмная
            </button>
          </div>
          <p class="settings-card__current">
            Сейчас: <strong data-theme-label>Светлая</strong>
          </p>
        </div>
        <div class="settings-card">
          <p class="settings-card__title">Тон коммуникации</p>
          <div class="tone-toggle" role="radiogroup" aria-label="Тон сообщений">
            <button class="tone-toggle__button" type="button" data-tone-option="soft" aria-pressed="false">
              Мягко
            </button>
            <button class="tone-toggle__button" type="button" data-tone-option="sarcastic" aria-pressed="false">
              Саркастично
            </button>
          </div>
          <p class="settings-card__current">
            Текущий тон: <strong data-tone-label>Мягко</strong>
          </p>
          <p class="settings-card__preview">
            Пример: <span data-copy="onboardingJabs"></span>
          </p>
        </div>
        <details class="settings-details">
          <summary class="settings-details__summary">PRO: Сервис</summary>
          <div class="settings-details__body">
            <div class="settings-card">
              <p class="settings-card__title">Сервис</p>
              <p class="settings-card__hint">Сбросит только данные Life Shield, не трогая другие сайты.</p>
              <button class="settings-action settings-action--danger" type="button" data-reset-storage>
                Сбросить данные
              </button>
              <p class="settings-card__hint settings-card__hint--inline">
                Диагностика: <span data-sw-status>—</span>
              </p>
            </div>
          </div>
        </details>
      </section>
    </main>

    <nav class="bottom-nav" aria-label="Основная навигация">
      <button class="bottom-nav__item is-active" type="button" data-target="shield">Щит</button>
      <button class="bottom-nav__item" type="button" data-target="missions">Миссии</button>
      <button class="bottom-nav__item" type="button" data-target="stress">Стресс-тест</button>
      <button class="bottom-nav__item" type="button" data-target="history">История</button>
      <button class="bottom-nav__item" type="button" data-target="settings">Настройки</button>
    </nav>
  </div>

  <div class="update-toast" role="status" aria-live="polite" data-update-toast hidden>
    <span>Доступно обновление</span>
    <button class="update-toast__button" type="button" data-update-action>Обновить</button>
  </div>

  <script type="module" src="core/app.js"></script>
</body>
</html>
